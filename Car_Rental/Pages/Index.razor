@page "/"
@using Car_Rental.Business.Classes;
@using Car_Rental.Common.Enums;
@inject BookingProcessor bp;

<PageTitle>Car Rental</PageTitle>


@* *********************VEHICLES*********************** *@
<div class="container">
    <h1>Nydahls Biluthyrning (VG)</h1>
    <h4>Vehicles</h4>
    <table class="table table-hover border border-dark">
        <thead>
            <tr class="table-dark">
                <th scope="col">RegNo</th>
                <th scope="col">Brand</th>
                <th scope="col">Odometer</th>
                <th scope="col">Cost/km</th>
                <th scope="col">Vehicle Type</th>
                <th scope="col">$/Day</th>
                <th scope="col">Action</th>
                <th scope="col">Status</th>
            </tr>
        </thead>
        <tbody>
            @*User Input*@
            <tr>
                <th scope="col">
                    <input type="text" class="form-control" placeholder="Reg Nr" aria-label="Username" aria-describedby="basic-addon1">
                </th>
                <th scope="col">
                    <input type="text" class="form-control" placeholder="Brand" aria-label="Username" aria-describedby="basic-addon1">
                </th>
                <th scope="col">
                    <input type="text" class="form-control" placeholder="Odometer" aria-label="Username" aria-describedby="basic-addon1">
                </th>
                <th scope="col">
                    <input type="text" class="form-control" placeholder="Cost/km" aria-label="Username" aria-describedby="basic-addon1">
                </th>
                <th scope="col">
                    <div class="dropdown">
                        <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Dropdown button
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#">Action</a></li>
                            <li><a class="dropdown-item" href="#">Another action</a></li>
                            <li><a class="dropdown-item" href="#">Something else here</a></li>
                        </ul>
                    </div>
                </th>
                <th scope="col"></th>
                <th scope="col">
                    <button type="button" class="btn btn-outline-success">Add</button>
                </th>
                <th scope="col"></th>
            </tr>


            @*Visar urvalet av bilar*@
            @foreach (var vehicle in bp.GetVehicles())
            {
                <tr>
                    <th scope="row">@vehicle.RegNo</th>
                    <td>@vehicle.Brand</td>
                    <td>@vehicle.Odometer</td>
                    <td>@vehicle.CostKm</td>
                    <td>@vehicle.VehicleType</td>
                    <td>@vehicle.CostDay</td>
                    @{
                        //TODO:Dropdown meny och "rent" - knapp
                    }
                    <td></td>
                    <td>
                        <span class="@(vehicle.Status == VehicleStatuses.Booked
                            ? "badge rounded-pill bg-danger text-light"
                            : "badge rounded-pill bg-dark text-light")"
                        >@vehicle.Status</span>
                    </td>
                </tr>
            }
        
        </tbody>
    </table>
</div>
@* *********************BOOKINGS*********************** *@
<div class="container">
    <h4>Bookings</h4>
    <table class="table table-hover border border-dark">
        <thead>
            <tr class="table-dark">
                <th scope="col">RegNo</th>
                <th scope="col">Customer</th>
                <th scope="col">KmRented</th>
                <th scope="col">KmReturned</th>
                <th scope="col">Rented</th>
                <th scope="col">Returned</th>
                <th scope="col">Cost</th>
                <th scope="col">Status</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var customer in bp.GetBookings())
            {
                <tr>
                    <th scope="row">@customer.RegNo</th>
                    <td>@customer.NameWithSsn</td>
                    <td>@customer.KmRented</td>
                    <td>@customer.KmReturned</td>
                    <td>@customer.DayRentedOut</td>
                    <td>@customer.DayReturned</td>
                    <td>@customer.Cost</td>
                    <td>
                        <span class="@((int)customer.Status == 3
                            ? "badge bg-danger text-light"
                            : "badge bg-success text-light")">@customer.Status</span>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

@* *********************CUSTOMERS*********************** *@
<div class="container">
    <h4>Customers</h4>
    <table class="table table-hover border border-dark">
        <thead>
            <tr class="table-dark">
                <th scope="col">SSN</th>
                <th scope="col">Last Name</th>
                <th scope="col">Firts Name</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var kund in bp.GetCustomers())
            {
            <tr>
                 <th scope="row">@kund.Ssn</th>
                 <td>@kund.LastName</td>
                 <td>@kund.FirstName</td>
            </tr>
            }           
        </tbody>
    </table>
</div>